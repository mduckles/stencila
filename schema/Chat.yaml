title: Chat
"@id": stencila:Chat
nick: cht
extends: [CreativeWork, Executable]
category: works
status: under-development
description: A chat conversation, usually with a generative AI model.
patch:
  applyWith: Chat::apply_with
markdown:
  derive: false
required:
  - model
  - content
core:
  - title
  - prompt
  - isEphemeral
properties:
  model:
    "@id": stencila:model
    description: The name, and other options, for the model involved in the chat.
    $ref: InstructionModel
    walk: true
    patch:
      formats: [md, smd, myst, ipynb, qmd]
    dom:
      elem: div
  prompt:
    "@id": stencila:prompt
    description: The id of the system prompt to prefix chat messages with.
    type: string
    patch:
      formats: [md, smd, myst, ipynb, qmd]
  content:
    "@id": stencila:content
    description: The messages, and optionally other content, that make up the conversation.
    $comment: |
      Usually, a model chat will only contain `ChatMessage`s that alternate
      between user and model roles. However, other types of block content
      are permitted.
    type: array
    items:
      $ref: Block
    dom:
      elem: div
  isEphemeral:
    "@id": stencila:isEphemeral
    description: Whether a chat that is nested within another node is ephemeral or not.
    $comment: |
      This property should be set to `true` or `false` for `Chat`s that are nested so that
      the messages are not patched by formats that do not support them
    type: boolean
